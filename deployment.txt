# Felicity Event Management System - Deployment Guide
# ===================================================

# DEPLOYMENT URLs (to be filled after deployment)
# ================================================

Frontend URL: https://felicity-event-mgmt.netlify.app
Backend URL: https://felicity-backend-api.onrender.com

# ===================================================
# DEPLOYMENT INSTRUCTIONS
# ===================================================

## 1. DATABASE SETUP (MongoDB Atlas)
## ----------------------------------

### Step 1: Create MongoDB Atlas Account
1. Go to https://www.mongodb.com/atlas
2. Sign up for free account
3. Create a new project "Felicity"

### Step 2: Create a Cluster
1. Click "Build a Cluster"
2. Choose FREE tier (M0 Sandbox)
3. Select closest region
4. Click "Create Cluster" (takes 1-3 minutes)

### Step 3: Configure Access
1. Go to "Database Access" → Add New Database User
   - Username: felicity_admin
   - Password: (generate secure password)
   - Privileges: "Read and write to any database"

2. Go to "Network Access" → Add IP Address
   - Click "Allow Access from Anywhere" (0.0.0.0/0)
   - (For production, restrict to specific IPs)

### Step 4: Get Connection String
1. Go to "Clusters" → Click "Connect"
2. Choose "Connect your application"
3. Copy the connection string:
   mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/felicity?retryWrites=true&w=majority

4. Replace <username> and <password> with your credentials


## 2. BACKEND DEPLOYMENT (Render.com)
## -----------------------------------

### Step 1: Prepare Backend
1. Ensure package.json has start script:
   "scripts": {
     "start": "node server.js",
     "dev": "nodemon server.js"
   }

2. Ensure server listens on process.env.PORT

### Step 2: Deploy to Render
1. Go to https://render.com
2. Sign up/login with GitHub
3. Click "New" → "Web Service"
4. Connect your GitHub repository
5. Configure:
   - Name: felicity-backend
   - Root Directory: backend
   - Environment: Node
   - Build Command: npm install
   - Start Command: npm start
   - Instance Type: Free

### Step 3: Add Environment Variables
In Render dashboard, add these environment variables:

PORT=5000
NODE_ENV=production
MONGODB_URI=mongodb+srv://...your-atlas-connection-string...
JWT_SECRET=your-super-secret-key-minimum-32-characters
JWT_EXPIRE=7d
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=Felicity <noreply@felicity.iiit.ac.in>
FRONTEND_URL=https://felicity-frontend.vercel.app

### Step 4: Deploy
1. Click "Create Web Service"
2. Wait for build and deployment (5-10 minutes)
3. Copy the URL (e.g., https://felicity-backend.onrender.com)


## 3. FRONTEND DEPLOYMENT (Vercel)
## --------------------------------

### Step 1: Prepare Frontend
1. Ensure vite.config.js is properly configured
2. Ensure all routes work with React Router

### Step 2: Deploy to Vercel
1. Go to https://vercel.com
2. Sign up/login with GitHub
3. Click "New Project"
4. Import your GitHub repository
5. Configure:
   - Framework Preset: Vite
   - Root Directory: frontend
   - Build Command: npm run build
   - Output Directory: dist

### Step 3: Add Environment Variables
In Vercel dashboard, add:

VITE_API_URL=https://felicity-backend.onrender.com/api

### Step 4: Deploy
1. Click "Deploy"
2. Wait for build (2-5 minutes)
3. Copy the URL (e.g., https://felicity-frontend.vercel.app)


## 4. POST-DEPLOYMENT CHECKLIST
## -----------------------------

[ ] Update FRONTEND_URL in backend environment variables
[ ] Update VITE_API_URL in frontend environment variables
[ ] Redeploy both if URLs changed
[ ] Run admin seed: Access /api/admin/seed endpoint or run locally
[ ] Test login with admin credentials
[ ] Test registration flow
[ ] Test event creation
[ ] Test event registration
[ ] Verify email sending works


## 5. ALTERNATIVE DEPLOYMENT OPTIONS
## ----------------------------------

### Backend Alternatives:
- Railway (https://railway.app) - Similar to Render
- Fly.io (https://fly.io) - Container-based
- Heroku (https://heroku.com) - Paid only now

### Frontend Alternatives:
- Netlify (https://netlify.com) - Very similar to Vercel
- GitHub Pages - Static only, needs SPA configuration
- Cloudflare Pages - Fast CDN

### Database Alternatives:
- MongoDB Atlas (recommended, used above)
- Render MongoDB add-on
- Railway MongoDB


## 6. TROUBLESHOOTING
## -------------------

### Backend not starting
- Check logs in Render dashboard
- Verify MONGODB_URI is correct
- Ensure PORT is set to environment variable

### Frontend API calls failing
- Check VITE_API_URL is correct
- Verify CORS is configured in backend
- Check browser console for errors

### Email not sending
- Use Gmail App Password, not regular password
- Enable "Less secure app access" if needed
- Verify EMAIL_HOST and EMAIL_PORT

### MongoDB connection issues
- Whitelist IP in Atlas Network Access
- Verify connection string format
- Check username/password


## 7. PRODUCTION SECURITY
## -----------------------

Before going live:

1. Change default admin password
2. Use strong JWT_SECRET (32+ characters)
3. Enable HTTPS only (automatic on Vercel/Render)
4. Restrict MongoDB IP access
5. Set up rate limiting
6. Enable logging for monitoring
7. Set up error tracking (Sentry, etc.)


# ===================================================
# QUICK REFERENCE
# ===================================================

Backend Deploy Command: git push origin main (auto-deploys)
Frontend Deploy Command: git push origin main (auto-deploys)

Backend Logs: Render Dashboard → Logs
Frontend Logs: Vercel Dashboard → Functions → Logs

MongoDB Logs: Atlas → Clusters → Metrics

# ===================================================
